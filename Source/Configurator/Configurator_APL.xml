<?xml version="1.0" encoding="utf-8"?>
<!--GoogleMaps plugin additions-->
<root xmlns:android="http://schemas.android.com/apk/res/android">
	<androidManifestUpdates>
		<addElements tag="application">
      <provider android:name="android.support.v4.content.FileProvider" android:authorities="com.luxario.configurator.fileprovider" android:exported="false" android:grantUriPermissions="true">
        <meta-data android:name="android.support.FILE_PROVIDER_PATHS" android:resource="@xml/file_provider_paths" />
      </provider>
    </addElements>

		<addElements tag="manifest">
      <!--uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
      <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /-->
		</addElements>	
	</androidManifestUpdates>
  <prebuildCopies>
    <copyDir src="$S(PluginDir)/java" dst="$S(BuildDir)" />
  </prebuildCopies>
	
	<gameActivityImportAdditions>
		<insert>
      import android.util.Log;
      import android.os.Bundle;
      import android.app.ActivityManager;
    </insert>
	</gameActivityImportAdditions>
	<gameActivityOnStartAdditions>
		<insert>
		</insert>
	</gameActivityOnStartAdditions>
	<gameActivityOnCreateAdditions>
		<insert>
		</insert>
	</gameActivityOnCreateAdditions>
	<gameActivityClassAdditions>
		<insert>
			public void AndroidThunkJava_CreateInstagramIntent(final String MediaType, final String MediaPath)
			{
				runOnUiThread(new Runnable() {
					@Override
					public void run() {
						Intent Share = new Intent(Intent.ACTION_SEND);
						Share.setType(MediaType);
						File MediaFile = new File(MediaPath);
						Uri MediaUri = FileProvider.getUriForFile(getApplicationContext(), "com.luxario.configurator.fileprovider", MediaFile);
						Share.putExtra(Intent.EXTRA_STREAM, MediaUri);
						Share.setPackage("com.instagram.android");
						Intent ShareToIntent = Intent.createChooser(Share, "Share to");
						ShareToIntent.setFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
						startActivity(ShareToIntent);
					}
				});
			}
      
			public boolean AndroidThunkJava_IsInstagramInstalled()
			{
				PackageManager AndroidPackageManager = getPackageManager();
				try {
						return AndroidPackageManager.getApplicationInfo("com.instagram.android", 0).enabled;
				}
				catch (PackageManager.NameNotFoundException e) {
						return false;
				}
			}
    </insert>
	</gameActivityClassAdditions>

	<gameActivityOnActivityResultAdditions>	
		<insert>
		</insert>
	</gameActivityOnActivityResultAdditions>
	<gameActivityOnPauseAdditions>
		<insert>
		</insert>
	</gameActivityOnPauseAdditions>
	<gameActivityOnResumeAdditions>
		<insert>
		</insert>
	</gameActivityOnResumeAdditions>
</root>